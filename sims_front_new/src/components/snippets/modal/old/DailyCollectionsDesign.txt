<script setup>
import { ref, onMounted, computed } from 'vue';
import {
    getQuarter,
} from "../Fetchers.js";

import Loader from '../snippets/loaders/Loading1.vue';
import { getUserID } from "../../routes/user.js";
import { useRouter, useRoute } from 'vue-router'


const router = useRouter();
const preLoading = ref(true)
const emit = defineEmits(['fetchUser', 'doneLoading'])
const accessData = ref([])
const userID = ref('')


const booter = async () => {
    // getProgram().then((results) => {
    //     program.value = results
    //     booting.value = 'Loading Program...'
    //     bootingCount.value += 1
    // })
}


onMounted(async () => {
    getUserID().then(async (results1) => {
        // user.value = results.account.data.name
        userID.value = results1.account.data.id
        accessData.value = results1.access

        emit('fetchUser', results1)
        try {
            preLoading.value = true
            await booter().then(() => {
                console.log('booter done')
                emit('doneLoading', false)
            })

        } catch (err) {

            // alert('error loading the list default components')
            Swal.fire({
                icon: "error",
                title: "Oops...",
                text: "Something went wrong!",
                footer: '<a href="#" disabled>Have you checked your internet connection?</a>'
            }).then(() => {
                preLoading.value = false
                emit('doneLoading', false)
            });
        }
    }).catch((err) => {
        // alert('Unauthorized Session, Please Log In')
        // router.push("/");
        // window.stop()
        Swal.fire({
            icon: "error",
            title: "Oops...",
            text: "Session expired, log in again",
        }).then(() => {
            router.push("/");
            window.stop()
        });
    })


})

</script>
<template>
    <div>
        <div class="p-3 mb-4 border-bottom">
            <h5 class=" text-uppercase fw-bold">Daily Collections</h5>
        </div>

        <div class="table-responsive border p-3 small-font">
            <div style="font-family: 'Inter', sans-serif; background: #f9fafb; color: #333; padding: 20px;">
                <!-- Top cards -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div
                        style="background: #fff; border-radius: 16px; padding: 20px; box-shadow: 0 1px 4px rgba(0,0,0,0.1);">
                        <div style="font-size: 14px; color: #666;">Total Collections</div>
                        <div style="font-size: 32px; font-weight: bold; margin-top: 5px;">270</div>
                        <div style="font-size: 12px; color: #999;">transactions</div>
                    </div>

                    <div
                        style="background: #fff; border-radius: 16px; padding: 20px; box-shadow: 0 1px 4px rgba(0,0,0,0.1);">
                        <div style="font-size: 14px; color: #666;">Total Earnings</div>
                        <div style="font-size: 32px; font-weight: bold; margin-top: 5px;">â‚±105,412.00</div>
                        <div style="font-size: 12px; color: #999;">this week</div>
                    </div>

                    <div
                        style="background: #fff; border-radius: 16px; padding: 20px; box-shadow: 0 1px 4px rgba(0,0,0,0.1);">
                        <div style="font-size: 14px; color: #666;">Average Processing Time</div>
                        <div style="font-size: 32px; font-weight: bold; margin-top: 5px;">30</div>
                        <div style="font-size: 12px; color: #999;">minutes</div>
                    </div>

                    <div
                        style="background: #fff; border-radius: 16px; padding: 20px; box-shadow: 0 1px 4px rgba(0,0,0,0.1);">
                        <div style="font-size: 14px; color: #666;">Overall Rating</div>
                        <div style="font-size: 32px; font-weight: bold; margin-top: 5px;">4.9</div>
                        <div style="font-size: 12px; color: #999;">out of 5</div>
                    </div>
                </div>

                <!-- Bottom section -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px;">
                    <!-- Bar chart imitation -->
                    <div
                        style="background: #fff; border-radius: 16px; padding: 20px; box-shadow: 0 1px 4px rgba(0,0,0,0.1);">
                        <div style="font-weight: 600; margin-bottom: 15px;">Total Collections (Week)</div>
                        <div
                            style="display: flex; align-items: flex-end; justify-content: space-between; height: 160px;">
                            <div style="width: 10%; background: #dbeafe; height: 60%; border-radius: 8px;"></div>
                            <div style="width: 10%; background: #93c5fd; height: 70%; border-radius: 8px;"></div>
                            <div style="width: 10%; background: #60a5fa; height: 80%; border-radius: 8px;"></div>
                            <div style="width: 10%; background: #3b82f6; height: 100%; border-radius: 8px;"></div>
                            <div style="width: 10%; background: #60a5fa; height: 85%; border-radius: 8px;"></div>
                            <div style="width: 10%; background: #93c5fd; height: 70%; border-radius: 8px;"></div>
                            <div style="width: 10%; background: #dbeafe; height: 50%; border-radius: 8px;"></div>
                        </div>
                        <div
                            style="display: flex; justify-content: space-between; font-size: 12px; margin-top: 10px; color: #666;">
                            <span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span><span>Sun</span>
                        </div>
                    </div>

                    <!-- Calendar imitation -->
                    <div
                        style="background: #fff; border-radius: 16px; padding: 20px; box-shadow: 0 1px 4px rgba(0,0,0,0.1);">
                        <div style="font-weight: 600; margin-bottom: 15px;">Activity in March</div>
                        <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; font-size: 12px;">
                            <div
                                style="text-align:center; background:#3b82f6; color:#fff; padding:6px; border-radius:6px;">
                                1</div>
                            <div
                                style="text-align:center; background:#3b82f6; color:#fff; padding:6px; border-radius:6px;">
                                2</div>
                            <div
                                style="text-align:center; background:#3b82f6; color:#fff; padding:6px; border-radius:6px;">
                                3</div>
                            <div style="text-align:center; background:#f3f4f6; padding:6px; border-radius:6px;">4</div>
                            <div style="text-align:center; background:#f3f4f6; padding:6px; border-radius:6px;">5</div>
                            <div
                                style="text-align:center; background:#3b82f6; color:#fff; padding:6px; border-radius:6px;">
                                6</div>
                            <div
                                style="text-align:center; background:#3b82f6; color:#fff; padding:6px; border-radius:6px;">
                                7</div>
                            <div
                                style="text-align:center; background:#3b82f6; color:#fff; padding:6px; border-radius:6px;">
                                8</div>
                            <div style="text-align:center; background:#f3f4f6; padding:6px; border-radius:6px;">9</div>
                            <div style="text-align:center; background:#f3f4f6; padding:6px; border-radius:6px;">10</div>
                            <div
                                style="text-align:center; background:#3b82f6; color:#fff; padding:6px; border-radius:6px;">
                                11</div>
                            <div
                                style="text-align:center; background:#3b82f6; color:#fff; padding:6px; border-radius:6px;">
                                12</div>
                            <div
                                style="text-align:center; background:#3b82f6; color:#fff; padding:6px; border-radius:6px;">
                                13</div>
                            <div style="text-align:center; background:#f3f4f6; padding:6px; border-radius:6px;">14</div>
                            <div style="text-align:center; background:#f3f4f6; padding:6px; border-radius:6px;">15</div>
                        </div>
                        <div
                            style="display:flex; justify-content:center; gap:15px; font-size:12px; margin-top:10px; color:#666;">
                            <div><span
                                    style="display:inline-block;width:10px;height:10px;background:#3b82f6;border-radius:2px;margin-right:5px;"></span>Working
                                Day</div>
                            <div><span
                                    style="display:inline-block;width:10px;height:10px;background:#f3f4f6;border-radius:2px;margin-right:5px;border:1px solid #ccc;"></span>Day
                                Off</div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Settlement Modal
    <div class="modal fade" id="settlementmodal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Payment Settlement</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        @click="showPaymentModal = false"></button>
                </div>
                <div class="modal-body">
                    <AccountingPaymentModal v-if="showPaymentModal" :accountData="studentsAccount" :billTypeData="2" />
                </div>
                <div class="modal-footer d-flex justify-content-between">
                    <div class="form-group">
                        <small id="emailHelp" class="form-text text-muted">We'll never share your personal information
                            with anyone
                            else (Data Privacy Act of 2012)</small>
                    </div>
                    <div class="d-flex gap-2">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                            @click="showPaymentModal = false">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div> -->
</template>